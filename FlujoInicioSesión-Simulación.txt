
Flujo de simulación de inicio sesión

#####

aws cognito-idp admin-set-user-password `
  --user-pool-id us-east-1_b6vLItjNm `
  --username testuser `
  --password Example123! `
  --permanent

######

$response = aws cognito-idp initiate-auth `
  --auth-flow USER_PASSWORD_AUTH `
  --client-id 5lct0qdtj4k3q62btlttp1ugs7 `
  --auth-parameters USERNAME=testuser,PASSWORD=Example123! | ConvertFrom-Json

#######

$response.AuthenticationResult.IdToken

######

$headers = @{
    "Authorization" = "eyJraWQiOiIzV3NBTE53a1FvYXA4XC8zWDZ3MVk5bHNNcmxVbGRzQTZ6NnNKRE5FYVdGOD0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIwNDk4ZjQxOC0zMDExLTcwNDEtNzBlMy0wZTVjNTg4NmM2MmQiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXC91cy1lYXN0LTFfYjZ2TEl0ak5tIiwiY29nbml0bzp1c2VybmFtZSI6InRlc3R1c2VyIiwib3JpZ2luX2p0aSI6IjVkNzllMzk1LTM0OGQtNDk4YS1hZDEzLWY3ZDA3MmExMWI0YyIsImF1ZCI6IjVsY3QwcWR0ajRrM3E2MmJ0bHR0cDF1Z3M3IiwiZXZlbnRfaWQiOiIyYWI5NzIzOC00YmFiLTRmZjMtYmFiMS05ZTJiM2ZhN2Y0NTkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTc0NTk3MTk3OSwiZXhwIjoxNzQ1OTc1NTc5LCJpYXQiOjE3NDU5NzE5NzksImp0aSI6ImU2MzE4ZmRhLTgyYzMtNDIzYS1hYjBlLTdlYTI1ZGI2MzlhNCIsImVtYWlsIjoidGVzdHVzZXJAZXhhbXBsZS5jb20ifQ.lOeBHxv-ZUhu9ze5dJpVwMVaNAO0p8SKx9iJULWKAl2oE6LdyMvhzdeLsMsCxsZL6Q7nmHGslEir2SLj02NSHHZ-RwTuu_V65D1h1bZAkjDE2HV-Q_kr10qFGHzPPzw1q_O1ITRt-aufPOx7xRTJjmEfKI57EQeslDS1MwiqbFUg4DT1jxVFRNYGD2Q-ewZzrodkZj_OYpY1bQbmh_9B7TngiNlNIUR8Rcim4XWjCCmZBgN2TWICUso1E-alupRd8yCLyz6f9Qd1kdRpHcVJYFjIH4osaJ90MD486M3vXmOD7orlsQBJ1BljW_KhMLnOe-fl17jsMRsAloes_7VI9A"
}

$response = Invoke-WebRequest -Uri "https://oesr7zhyae.execute-api.us-east-1.amazonaws.com/dev/hello" -Headers $headers -Method Get

$response.Content

#####
